
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Морской Бой</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="ship-sprite-full.css" />
</head>
<body>
  <h1>Морской Бой</h1>
  <div id="stats">Побед: 0 | Поражений: 0</div>

  <div class="main-wrapper" style="flex-direction: column;">
    <div class="board-container">
      <div>
        <p class="board-label">Противник</p>
        <div id="opponent-board" class="board"></div>
      </div>
      <div>
        <p class="board-label">Ты</p>
        <div id="player-board" class="board"></div>
      </div>
    </div>

    <div class="controls" style="display: grid; grid-template-columns: repeat(2, auto); gap: 0.5rem; margin-top: 1rem;">
      <button id="toggle-direction">Повернуть</button>
      <button id="ready-button">Готово</button>
      <button onclick="window.inviteFriend()">Пригласить</button>
      <button onclick="window.autoPlaceShips()">Авто</button>
    </div>

    <div class="ship-picker" id="ship-picker" style="flex-direction: row; justify-content: center; flex-wrap: wrap; margin-top: 1rem;">
      <div class="ship-option" data-length="4"><img src="assets/ships/ship-4-h.png" alt="4"></div>
      <div class="ship-option" data-length="3"><img src="assets/ships/ship-3-h.png" alt="3"></div>
      <div class="ship-option" data-length="2"><img src="assets/ships/ship-2-h.png" alt="2"></div>
      <div class="ship-option" data-length="1"><img src="assets/ships/ship-1-h.png" alt="1"></div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="script.js"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    const tg = window.Telegram.WebApp;
    tg.ready(); tg.expand();
    const userId = tg.initDataUnsafe?.user?.id || ("guest" + Math.floor(Math.random() * 10000));
    const room = tg.initDataUnsafe?.start_param || userId;
    window.battleshipApp = { userId, room };
  </script>
</body>
</html>

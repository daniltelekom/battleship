
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Морской Бой</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>Морской Бой</h1>
  <div id="stats">Побед: 0 | Поражений: 0</div>

  <div class="board-container">
    <div>
      <p class="board-label">Противник</p>
      <div id="opponent-board" class="board"></div>
    </div>
    <div>
      <p class="board-label">Ты</p>
      <div id="player-board" class="board"></div>
    </div>
  </div>

  <div class="controls">
    <button id="toggle-direction">Повернуть</button>
    <button id="ready-button">Готово</button>
    <button id="invite-button">Пригласить друга</button>
    <button id="auto-button">Авторасстановка</button>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="script.js"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    const tg = window.Telegram.WebApp;
    tg.ready(); tg.expand();
    const userId = tg.initDataUnsafe?.user?.id || ("guest" + Math.floor(Math.random() * 10000));
    const room = tg.initDataUnsafe?.start_param || userId;
    window.battleshipApp = { userId, room };

    document.getElementById("invite-button").onclick = () => {
      const link = `https://t.me/${tg.initDataUnsafe?.bot?.username}?startapp=${userId}`;
      Telegram.WebApp.openTelegramLink(
        `https://t.me/share/url?url=${encodeURIComponent(link)}&text=Присоединяйся в морской бой!`
      );
    };

    document.getElementById("auto-button").onclick = () => {
      if (typeof autoPlaceShips === "function") autoPlaceShips();
    };
  </script>
</body>
</html>
